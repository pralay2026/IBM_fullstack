let data=[    
    {"id": 2,
        "name": "Gaming Mouse",
        "category": "Electronics",
        "price": 29.99,
        "rating": 4.2,
        "image": "https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcTdeYUxNZtGDEGOk6UWww1m60ZKYwb9UcLbe-6Wc4sq6a5rMK5es6xPtksq6Eb2KrsxFJk9vI-2BQyW4QPOyGXaG6bZ-wXZjfqKhiMJVRGCmOKoXzzwQHslBQ"
    },
{
    "id": 3,
    "name": "Mechanical Keyboard",
    "category": "Electronics",
    "price": 79.99,
    "rating": 4.7,
    "image": "https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcQd3CcNlyz7VcYXI76DnDqd8VFFZVosP2X-R_bT67iN2OrtS5uQPjju96dTtF_FOhaotYqYSkoCOgS5SqTLrd0CISCtvyMZ2dViDe6cAY7ESGZbpW70As2WKDE"
    } , 
{
    "id": 4,
    "name": "Smartwatch",
    "category": "Wearable",
    "price": 199.99,
    "rating": 4.8,
    "image": "https://m.media-amazon.com/images/I/71JU-bUt-sL.jpg"
},
{
    "id": 5,
    "name": "Running Shoes",
    "category": "Fashion",
    "price": 59.99,
    "rating": 4.3,
    "image": "https://assets.adidas.com/images/w_600,f_auto,q_auto/8db7a22fd8a14673a4d95c38624139ca_9366/Galaxy_7_Running_Shoes_Black_ID8765_HM1.jpg"
        },
{
    "id": 6,
    "name": "Leather Wallet",
    "category": "Fashion",
    "price": 19.99,
    "rating": 4.0,
    "image": "https://m.media-amazon.com/images/I/81WIcyHQ7oL.AC_UY1100.jpg"
},     
{
          "id": 7,
          "name": "Digital Camera",
          "category": "Electronics",
          "price": 349.99,
          "rating": 4.6,
          "image": "https://cdn.cinemacenter.in/image/cache/catalog/images/0021038_sony-zv-1-digital-camera_500-500x500.jpeg.webp"
        },
        {
          "id": 8,
          "name": "Backpack",
          "category": "Accessories",
          "price": 39.99,
          "rating": 4.4,
          "image": "https://m.media-amazon.com/images/I/71qpXciYP1L.jpg"
        },
        {
          "id": 9,
          "name": "Sunglasses",
          "category": "Fashion",
          "price": 24.99,
          "rating": 4.1,
          "image": "https://d3995ea24pmi7m.cloudfront.net/media/catalog/product/M/8/M8022BR1V_1_lar.jpg"
        },
        {
          "id": 10,
          "name": "Water Bottle",
          "category": "Home & Kitchen",
          "price": 14.99,
          "rating": 4.2,
          "image": "https://rukminim2.flixcart.com/image/850/1000/l4bn5ow0/bottle/6/c/9/1000-bpa-free-drinking-water-bottle-with-time-marker-straw-for-original-imagf8npfztmb3qg.jpeg?q=20&crop=false"
        },
        {
          "id": 11,
          "name": "Bluetooth Speaker",
          "category": "Electronics",
          "price": 59.99,
          "rating": 4.5,
          "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRuAvU3-uz13LNVhjc6HCKGVREFiseFmVfRHA&s"
        },
        {
          "id": 12,
          "name": "Electric Kettle",
          "category": "Home & Kitchen",
          "price": 34.99,
          "rating": 4.6,
          "image": "https://m.media-amazon.com/images/I/51Q11RNy8dL.AC_UF894,1000_QL80.jpg"
        },
        {
          "id": 13,
          "name": "Portable Power Bank",
          "category": "Electronics",
          "price": 39.99,
          "rating": 4.3,
          "image": "https://www.ubuy.co.in/productimg/?image=aHR0cHM6Ly9pbWFnZXMtY2RuLnVidXkuY28uaW4vNjVmOTA4NDkyMzFlMDEyMGMzMjViN2UzLXBvcnRhYmxlLWNoYXJnZXItcG93ZXItYmFuay0yNTgwMG1haC5qcGc.jpg"
        },
        {
          "id": 14,
          "name": "Smart LED Bulb",
          "category": "Home & Kitchen",
          "price": 19.99,
          "rating": 4.7,
          "image": "https://m.media-amazon.com/images/I/51yBOvORkPL.jpg"
        },
        {
          "id": 15,
          "name": "Noise Cancelling Earbuds",
          "category": "Electronics",
          "price": 89.99,
          "rating": 4.8,
          "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS2QL_OWaxEwuyQMUrYgVwoV9eTsv_hlzcWrg&s"
        },
        {
          "id": 16,
          "name": "Travel Pillow",
          "category": "Accessories",
          "price": 22.99,
          "rating": 4.2,
          "image": "https://rukminim2.flixcart.com/image/850/1000/kgjqefk0/neck-pillow-eye-shade/z/b/b/travel-neck-pillow-unisex-u-shaped-micro-fibre-soft-cushions-original-imafwr8agyk7dt8c.jpeg?q=90&crop=false"
        },
        {
          "id": 17,
          "name": "Yoga Mat",
          "category": "Fitness",
          "price": 29.99,
          "rating": 4.5,
          "image": "https://www.niviasports.com/cdn/shop/files/1_f74628ac-df66-4c71-b112-fd8253ce175a.jpg?v=1716799881"
        },
        {
          "id": 18,
          "name": "Men's Wrist Watch",
          "category": "Fashion",
          "price": 129.99,
          "rating": 4.6,
          "image": "https://lorenzindia.com/cdn/shop/files/MK-1065A_1-PhotoRoom.png?v=1695797189"
        },
        {
          "id": 19,
          "name": "Wireless Charger",
          "category": "Electronics",
          "price": 27.99,
          "rating": 4.3,
          "image": "https://m.media-amazon.com/images/I/61oIAKY9s1L.jpg"
        },
        {
          "id": 20,
          "name": "Graphic T-Shirt",
          "category": "Fashion",
          "price": 19.99,
          "rating": 4.1,
          "image": "https://www.hijibizi.in/cdn/shop/products/WhatsAppImage2022-11-02at22.20.19_1.jpg?v=1667718907&width=1445"
        }
];


function showData(Arr) {
    document.getElementById("products").innerHTML = "";
    Arr.forEach((el, index) => {
        let productBox = document.createElement("div");
        productBox.className = "product-box";

        let heading = document.createElement("h3");
        heading.innerText = el.category;

        let img = document.createElement("img");
        img.src = el.image;

        let name = document.createElement("p");
        name.innerText = el.name;

        let price = document.createElement("p");
        price.innerText = `$${el.price}`;

        let rating = document.createElement("p");
        rating.innerText = `Rating: ${el.rating}`;

        let button = document.createElement("button");
        button.innerText = "Add to Cart";
        button.addEventListener("click", () => {
            addToCart(el);
        });

        productBox.append(heading, img, name, price, rating, button);
        document.getElementById("products").append(productBox);
    });
}

showData(data);


// Debounce function to optimize search
function debounce(func, delay) {
    let timer;
    return function (...args) {
        clearTimeout(timer);
        timer = setTimeout(() => func.apply(this, args), delay);
    };
}

// Function to filter and display search results
function searchProducts() {
    let query = document.getElementById("searchBox").value.toLowerCase();
    let filteredData = data.filter(el => el.name.toLowerCase().includes(query));
    showData(filteredData);
}

// Attach the debounced search function to input event
document.getElementById("searchBox").addEventListener("input", debounce(searchProducts, 500));



































let cart = JSON.parse(localStorage.getItem("DataCart")) || [];

function addToCart(el) {
    let exists = cart.some(item => item.id === el.id);
    if (!exists) {
        cart.push(el);
        localStorage.setItem("DataCart", JSON.stringify(cart));
        alert("Item added");
    } else {
        alert("Item already in cart");
    }
    getData();
}

function getData() {
    let parsedData = JSON.parse(localStorage.getItem("DataCart"));
    console.log(parsedData);
}

function cartpage() {
    window.location.href = "cart.html";
}


// script.js

const productContainer = document.getElementById("products");
const searchBox = document.getElementById("searchBox");
const sortSelect = document.getElementById("sort");
const filterSelect = document.getElementById("filter");
let products = [];

// Fetch products from API
async function fetchProducts() {
    try {
        const response = await fetch("https://fakestoreapi.com/products");
        products = await response.json();
        displayProducts(products);
    } catch (error) {
        console.error("Error fetching products:", error);
    }
}

// Display products dynamically
function displayProducts(productList) {
    productContainer.innerHTML = "";
    productList.forEach(product => {
        const productBox = document.createElement("div");
        productBox.className = "product-box";

        productBox.innerHTML = `
            <h3>${product.category}</h3>
            <img src="${product.image}" alt="${product.title}" />
            <p>${product.title}</p>
            <p>$${product.price}</p>
            <p>Rating: ${product.rating.rate}</p>
            <button onclick="viewProduct(${product.id})">View Details</button>
        `;

        productContainer.appendChild(productBox);
    });
}

// Search function with debounce
function debounce(func, delay) {
    let timer;
    return function (...args) {
        clearTimeout(timer);
        timer = setTimeout(() => func.apply(this, args), delay);
    };
}

function searchProducts() {
    const query = searchBox.value.toLowerCase();
    const filteredData = products.filter(product => product.title.toLowerCase().includes(query));
    displayProducts(filteredData);
}

searchBox.addEventListener("input", debounce(searchProducts, 300));

// Sorting functionality
sortSelect.addEventListener("change", () => {
    let sortedProducts = [...products];
    if (sortSelect.value === "asc") {
        sortedProducts.sort((a, b) => a.title.localeCompare(b.title));
    } else if (sortSelect.value === "dsc") {
        sortedProducts.sort((a, b) => b.title.localeCompare(a.title));
    }
    displayProducts(sortedProducts);
});

// Filtering functionality
filterSelect.addEventListener("change", () => {
    const category = filterSelect.value;
    if (category === "select") {
        displayProducts(products);
    } else {
        const filteredData = products.filter(product => product.category.toLowerCase() === category.toLowerCase());
        displayProducts(filteredData);
    }
});

// View Product Details
function viewProduct(productId) {
    localStorage.setItem("selectedProductId", productId);
    window.location.href = "product-detail.html";
}

// Initialize products fetch
fetchProducts();